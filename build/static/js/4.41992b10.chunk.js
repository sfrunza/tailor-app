(this["webpackJsonptailor-app"]=this["webpackJsonptailor-app"]||[]).push([[4],{492:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return V}));var n=a(4),c=a(8),r=a(10),i=a(0),l=a.n(i),o=a(442),s=a(447),d=a(24),u=a(466),j=a(458),b=a(470),m=a(488),g=a(489),h=a(482),O=a(483),f=a(490),x=a(493),p=a(9),y=a(124),v=a(412),C=a(295),w=a(485),k=a(486),D=a(487),S=a(456),I=a(484),N=a(1),A=[{value:"custom-clothing-design",label:"Custom Clothin Design"},{value:"embroidery",label:"Embroidery"},{value:"upholstery",label:"Upholstery"},{value:"drapery-and-curtains",label:"Drapery and curtains"},{value:"masks",label:"Masks"}],M=function(e){var t=e.image,a=e.index,n=e.firestore,c=e.storage,r=l.a.useState(!1),i=Object(d.a)(r,2),o=i[0],s=i[1],u=function(){s(!1)},j=A.findIndex((function(e){return e.value===t.category}));return Object(N.jsxs)(h.a,{hover:!0,children:[Object(N.jsx)(O.a,{children:Object(N.jsxs)(y.a,{variant:"body1",children:[a,"."]})}),Object(N.jsx)(O.a,{children:Object(N.jsx)("img",{src:t.src,alt:a,height:"100px",width:"auto"})}),Object(N.jsx)(O.a,{children:A[j].label}),Object(N.jsx)(O.a,{children:t.createdAt?t.createdAt.toDate().toLocaleString("en-US"):""}),Object(N.jsxs)(O.a,{align:"right",children:[Object(N.jsx)(v.a,{onClick:function(){s(!0)},children:Object(N.jsx)(C.a,{fontSize:"inherit",children:Object(N.jsx)(I.a,{color:"red"})})}),Object(N.jsxs)(w.a,{open:o,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(N.jsxs)(k.a,{id:"alert-dialog-title",style:{display:"flex",alignItems:"center",textAlign:"center"},children:[Object(N.jsx)("img",{src:t.src,alt:a,width:"20%",height:"100%"}),Object(N.jsx)(y.a,{variant:"body1",children:"Are you sure you want to delete this image?"})]}),Object(N.jsxs)(D.a,{children:[Object(N.jsx)(S.a,{onClick:u,color:"default",variant:"outlined",size:"small",children:"Cancel"}),Object(N.jsx)(S.a,{onClick:function(){var e,a;e=t.id,a=t.name,c.ref().child("images/".concat(a)).delete().then((function(){console.log("Image deleted from storage!")})).catch((function(e){console.error("Error removing image: ",e)})),n.collection("images").doc(e).delete().then((function(){console.log("Image deleted from collection!")})).catch((function(e){console.error("Error removing document: ",e)})),u()},color:"secondary",variant:"contained",size:"small",autoFocus:!0,startIcon:Object(N.jsx)(I.a,{size:"18"}),style:{backgroundColor:"#F80103",color:"#fff"},children:"Delete"})]})]})]})]},t.id)},P=a(33),z=a(274),B=[{id:"all",name:"All"},{id:"custom-clothing-design",name:"Custom Clothin Design"},{id:"embroidery",name:"Embroidery"},{id:"upholstery",name:"Upholstery"},{id:"drapery-and-curtains",name:"Drapery and curtains"}],F=Object(p.a)({root:{"& label.Mui-focused":{color:"#d4af37"},"& .MuiInput-underline:after":{borderBottomColor:"#d4af37"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"#d4af37"}}}})(u.a);var U=Object(o.a)((function(e){return{root:{width:"100%",overflowX:"auto"}}}));var W=function(){var e=U(),t=Object(i.useState)(0),a=Object(d.a)(t,2),c=a[0],r=a[1],l=Object(i.useState)(10),o=Object(d.a)(l,2),s=o[0],u=o[1],p=Object(i.useState)({category:null}),y=Object(d.a)(p,2),v=y[0],C=y[1],w=P.c.collection("images").orderBy("createdAt"),k=Object(z.a)(w,{idField:"id"}),D=Object(d.a)(k,1)[0],S=function(e,t){return e?e.slice(0).reverse().filter((function(e){var a=!0;return t.category&&e.category!==t.category&&(a=!1),t.category&&("custom-clothing-design"!==t.category||["custom-clothing-design"].includes(e.category)||(a=!1),"embroidery"!==t.category||["embroidery"].includes(e.category)||(a=!1),"upholstery"!==t.category||["upholstery"].includes(e.category)||(a=!1),"drapery-and-curtains"!==t.category||["drapery-and-curtains"].includes(e.category)||(a=!1)),t.inStock&&!["Needs Attention"].includes(e.image_status)&&(a=!1),a})):null}(D,v),I=function(e,t,a){return e?e.slice(t*a,t*a+a):null}(S,c,s);return Object(N.jsxs)(j.a,{className:e.root,children:[Object(N.jsxs)(b.a,{p:2,minHeight:56,display:"flex",alignItems:"center",children:[Object(N.jsx)(b.a,{children:Object(N.jsx)(F,{label:"Sort By Category",name:"category",onChange:function(e){e.persist();var t=null;"all"!==e.target.value&&(t=e.target.value),C((function(e){return Object(n.a)(Object(n.a)({},e),{},{category:t})}))},select:!0,SelectProps:{native:!0},value:v.category||"all",variant:"outlined",size:"small",children:B.map((function(e){return Object(N.jsx)("option",{value:e.id,children:e.name},e.id)}))})}),Object(N.jsx)(b.a,{flexGrow:1})]}),Object(N.jsx)(b.a,{minWidth:800,children:Object(N.jsxs)(m.a,{children:[Object(N.jsx)(g.a,{children:Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{padding:"checkbox"}),Object(N.jsx)(O.a,{children:"Image"}),Object(N.jsx)(O.a,{children:"Category"}),Object(N.jsx)(O.a,{children:"Upload Date"}),Object(N.jsx)(O.a,{align:"right",children:"Actions"})]})}),Object(N.jsx)(f.a,{children:null===I||void 0===I?void 0:I.map((function(e,t){return Object(N.jsx)(M,{image:e,index:D.indexOf(e)+1,firestore:P.c,storage:P.d},t)}))})]})}),Object(N.jsx)(x.a,{component:"div",count:S?S.length:1,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){u(e.target.value)},page:c,rowsPerPage:s,rowsPerPageOptions:[5,10,25]})]})},E=a(443),G=a(491),J=a(480),L=a(117),R=Object(o.a)((function(e){return{root:{},box:Object(r.a)({width:"100%",display:"flex",justifyContent:"space-between"},e.breakpoints.down("sm"),{flexDirection:"column"}),form:{display:"flex",justifyContent:"space-around",alignItems:"center"}}})),_=[{value:"custom-clothing-design",label:"Custom Clothin Design"},{value:"embroidery",label:"Embroidery"},{value:"upholstery",label:"Upholstery"},{value:"drapery-and-curtains",label:"Drapery and curtains"},{value:"masks",label:"Masks"}];var H=function(){var e=R(),t=Object(i.useState)(null),a=Object(d.a)(t,2),n=a[0],c=a[1],r=Object(i.useState)(""),l=Object(d.a)(r,2),o=l[0],s=l[1];return Object(N.jsx)(E.a,{className:e.root,container:!0,justify:"space-between",spacing:3,children:Object(N.jsxs)(E.a,{item:!0,className:e.box,children:[Object(N.jsx)(y.a,{variant:"h4",color:"textPrimary",children:"Images"}),Object(N.jsx)(b.a,{flexGrow:.7,children:Object(N.jsx)("form",{onSubmit:function(e){e.preventDefault(),P.d.ref("/images/".concat(n.name)).put(n).on("state_changed",console.log,console.error,(function(){P.d.ref("images").child(n.name).getDownloadURL().then((function(e){c(null),P.c.collection("images").doc().set({src:e,category:o,name:"".concat(n.name),createdAt:L.a.firestore.FieldValue.serverTimestamp()}).then((function(){console.log("upload success"),s("")})).catch((function(e){console.log(e)}))}))}))},className:e.form,children:Object(N.jsxs)(E.a,{container:!0,spacing:3,alignItems:"flex-end",children:[Object(N.jsx)(E.a,{item:!0,xs:8,md:3}),Object(N.jsxs)(E.a,{item:!0,xs:8,md:3,children:[Object(N.jsxs)(S.a,{variant:"contained",component:"label",size:"small",fullWidth:!0,children:["Choose File",Object(N.jsx)("input",{type:"file",hidden:!0,onChange:function(e){var t=e.target.files[0];Object(J.a)(t,{maxSizeMB:.5,useWebWorker:!0}).then((function(e){e.lastModifiedDate=new Date;var a=new File([e],t.name,{type:t.type,lastModified:Date.now()});c(a)})).catch((function(e){}))}})]}),n?Object(N.jsx)("p",{children:n.name}):null]}),Object(N.jsx)(E.a,{item:!0,xs:8,md:3,children:Object(N.jsx)(u.a,{id:"category",select:!0,name:"category",label:"Select",value:o||"",onChange:function(e){return s(e.target.value)},fullWidth:!0,children:_.map((function(e){return Object(N.jsx)(G.a,{value:e.value,children:e.label},e.value)}))})}),Object(N.jsx)(E.a,{item:!0,xs:8,md:3,children:Object(N.jsx)(S.a,{disabled:!n||!o,variant:"contained",color:"secondary",size:"small",type:"submit",fullWidth:!0,children:"upload"})})]})})})]})})},T=Object(o.a)((function(e){return{divider:Object(r.a)({margin:e.spacing(3,0)},e.breakpoints.up("md"),{margin:e.spacing(5,0)}),list:Object(r.a)({marginBottom:e.spacing(3)},e.breakpoints.up("md"),{marginBottom:e.spacing(4)})}})),V=function(e){var t=e.className,a=Object(c.a)(e,["className"]),r=T();return Object(N.jsxs)("div",Object(n.a)(Object(n.a)({className:t},a),{},{children:[Object(N.jsx)(H,{}),Object(N.jsx)(s.a,{className:r.divider}),Object(N.jsx)(W,{className:r.list})]}))}}}]);